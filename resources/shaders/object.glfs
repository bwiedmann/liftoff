#version 330 core

in vec2 uv0;
in vec4 color0;
in vec3 normal0;
in vec3 fpos0;

out vec4 color;

uniform sampler2D image;

void main()
{
    vec3 lightColor = vec3(0.9, 1.0, 0.85);
    vec3 lightPosition = vec3(0.0, -5000.0, -5000.0);
    vec3 lightDirection = normalize(lightPosition - fpos0);

    vec3 n = normalize(normal0);
    vec3 diffuse = max(dot(n, lightDirection), 0.0) * lightColor;

    color = texture(image, uv0) * (0.5 * color0 + vec4(diffuse, color0.w));
}
